//
// ------------- Navbar Logo-------------
//
.img-fluid-logo {
    height: clamp(
        var(--logo-min, $logo-min),
        var(--logo-preferred, $logo-preferred),
        var(--logo-max, $logo-max)
    );
    width: auto;
    display: block;
    object-fit: contain;
}

//
// ------------- Navbar -------------
//
// subtle shadow for navbar to separate it from content
.navbar {
    box-shadow: 0 6px 20px rgba(16, 16, 24, 0.06); // neutral, subtle

    // sticky navbar with smooth transition
    transition: box-shadow 0.3s ease-in-out, background-color 0.3s ease-in-out;

    &.scrolled {
        // after scroll you might want a stronger shadow
        box-shadow: 0 10px 30px rgba(16, 16, 24, 0.12);
        backdrop-filter: blur(4px); // subtle background blur
    }
}

/* Ensure brand doesn't grow/shrink */
.navbar-brand {
    flex: 0 0 auto;
    padding-right: 1rem;
}

/* Main nav: takes remaining space and aligns items nicely */
.navbar-nav.custom-nav {
    flex: 1 1 auto;
    display: flex;
    align-items: center;
    justify-content: flex-end; // or space-between if you prefer
    gap: 1.5rem; // space between links
}

/* Social icons group */
.navbar-social {
    display: flex;
    flex-direction: column; // default: column (desktop)
    gap: 0.4rem;
    align-items: center;

    .nav-item {
        display: inline-flex;
    }

    .nav-link {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 0.25rem; // light padding around icons
        font-size: 1.05rem; // icon size
        line-height: 1;
        color: inherit; // do not override color
    }

    // when nav is collapsed (mobile) and the collapse container is open,
    // center the icons horizontally inside the collapse area
    .navbar-collapse & {
        justify-content: center;
    }
}

/* Mobile tweaks: smaller logo and tighter gap */
// Bootstrap 'lg' breakpoint = 992px
@media (max-width: 991px) {
    .img-fluid-logo {
        height: clamp(
            var(--logo-min-small, $logo-min-small),
            var(--logo-preferred-small, $logo-preferred-small),
            var(--logo-max-small, $logo-max-small)
        );
    }

    .navbar-nav.custom-nav {
        gap: 0.75rem;
    }

    .navbar-social {
        flex-direction: row;
        gap: 1rem;
    }
}

//
// ------------- Navbar Links -------------
//
.navbar .nav-link {
    color: var(--text-color, $text-color);

    font-weight: var(--nav-link-font-weight, $nav-link-font-weight);
    padding: 0.5rem 0;
    white-space: nowrap; // prevents wrapping
    // transition: all 0.3s ease-in-out; // it is hard to animate my gradient font's color | color, background, text-shadow
    transition: color 0.3s ease-in-out, text-shadow 0.3s ease-in-out; // it is hard to animate my gradient font's color | color, background, text-shadow

    &:not(.active-pill):hover {
        @include m.text-color-malin-gradient($malinowy, $malinowy-dark);
    }

    &:active {
        color: $malinowy-dark;
        text-shadow: 0 0 3px rgba($malinowy-dark, 0.6);
    }
}

// nav-link: base settings for layers
.navbar .nav-link {
    position: relative; // needed for pseudo-elements to overlay
    display: inline-block; // so pseudo-elements perfectly overlay the text
    color: var(--text-color, $text-color);
    transition: color 0.3s ease-in-out;
    z-index: 1; // "base" text above background

    font-weight: var(--nav-link-font-weight, $nav-link-font-weight);
    padding: 0.5rem 0;
    white-space: nowrap; // prevents wrapping

    // pseudo-element containing gradient text (duplicate)
    &.gradient:not(.active-pill)::after {
        content: attr(data-text); // duplicate visible text
        position: absolute;
        inset: 0; // match parent position
        left: 0;
        top: 0;
        white-space: nowrap; // keep the same single line
        pointer-events: none;
        z-index: 2; // above the original text
        opacity: 0; // initially invisible
        transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out;
        transform: translateY(4px); // translateY(4px) to level vertically
        @include m.text-color-malin-gradient($malinowy, $malinowy-dark);
        -webkit-font-smoothing: antialiased;
    }

    // On hover: original text becomes transparent (smoothly),
    // pseudo-element with gradient fade-in -> looks like animated text color.
    &.gradient:not(.active-pill):hover {
        color: transparent;
        &::after {
            opacity: 1;
            transform: translateY(4px); // translateY(4px) to level vertically
        }
    }

    &:not(.gradient):not(.active-pill):hover {
        @include m.text-color-malin-gradient($malinowy, $malinowy-dark);
    }

    &:not(.active-pill):active {
        color: $malinowy-dark;
        text-shadow: 0 0 3px rgba($malinowy-dark, 0.3);
    }
}

.navbar .navbar-nav.custom-nav > .nav-item > .nav-link {
    @include m.padding-inline-block; //  use default padding values (1rem / 0.25rem)
}

/* gradient border (pseudo-element) + inner mask (pseudo-element)
   element + ::before (gradient, inset: -2px) + ::after (mask inset:0)
*/
.navbar .navbar-nav.custom-nav > .nav-item > .nav-link.active-pill {
    @extend .rounded-pill;
    position: relative; // necessary for absolute positioning of pseudo-elements
    display: inline-block;
    z-index: 2; // content above pseudo-elements
    background: transparent; // we do not use the element's background directly - the mask will simulate it
    transition: color 0.3s ease-in-out, box-shadow 0.3s ease-in-out,
        text-shadow 0.3s ease-in-out;

    // gradient "border" (bigger by 2px)
    &::before {
        content: "";
        position: absolute;
        inset: -2px; // grows by 2px outside
        border-radius: inherit; // match border-radius
        background: linear-gradient(135deg, $primary, $malinowy-dark);
        z-index: -1; // under mask ::after
        pointer-events: none;
    }

    // inner mask (covers gradient inside)
    &::after {
        content: "";
        position: absolute;
        inset: 0; // covers the entire interior of the element
        border-radius: inherit;
        background: $bg-pale; // masks the gradient - the interior has the background color
        z-index: -1; // above the gradient, below the content of the element
        transition: opacity 0.3s ease-in-out;
        pointer-events: none;
    }

    // hover / active state -> mask disappears and text becomes bright
    &:hover,
    &:active {
        color: $bg-pale; // kontrastowy tekst, gdy tło staje się gradientowe

        &::after {
            opacity: 0; // fully reveals the gradient
        }

        // if you want an additional effect for really active (e.g., clicked)
        &:active {
            box-shadow: 0 8px 20px rgba($malinowy-dark, 0.6);
            text-shadow: 0 0 3px rgba(255, 255, 255, 0.7);
        }
    }
}

//
// ------------- Dropdown -------------
//
/* make sure the caret has a transition */
.dropdown .dropdown-toggle::after {
    transition: transform 0.3s ease-in-out; // element don't have animation so pseudo element should don't have animation too | border-top-color 0.3s ease-in-out,
}

/* on hover/focus change the color of the "top" of the triangle (border-top-color) */
.dropdown .dropdown-toggle:hover::after,
.dropdown .dropdown-toggle:active::after {
    border-top-color: var(--malinowy, $malinowy);
}

.dropdown .dropdown-item {
    font-weight: $nav-link-font-weight;
    transition: background-color 0.3s ease-in-out, color 0.3s ease-in-out;

    &:hover {
        background-color: $dropdown-link-hover-bg;
    }

    &:active,
    &:focus {
        background-color: $primary;
    }
}
