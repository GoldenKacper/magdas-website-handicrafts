/**
 *  text-color-gradient
 *
 *  Applies a gradient color effect to text using background-clip and text-fill-color.
 *  Params:
 *   - $gradient-start (color): starting color of the gradient (default $malinowy)
 *   - $gradient-end (color): ending color of the gradient (default $malinowy-dark)
 */
@mixin text-color-gradient(
    $gradient-start: $malinowy,
    $gradient-end: $malinowy-dark
) {
    background: linear-gradient(135deg, $gradient-start, $gradient-end);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    text-fill-color: transparent;
}

/**
 *  gradient-animated-text
 *
 *  Creates an animated gradient text effect on hover using a pseudo-element (::after).
 *  The pseudo-element is positioned over the text and revealed on hover with a transition.
 *  Params:
 *   - $gradient-start (color): starting color of the gradient (default $malinowy)
 *   - $gradient-end (color): ending color of the gradient (default $malinowy-dark)
 *   - $duration (duration): transition duration (s or ms, default 0.3s)
 *   - $translateY (length): starting translateY for ::after (default 4px)
 *   - $exclude-class (string): class name (without dot) which disables hover effect (default 'active-pill')
 *   - $text-color (color): base text color when not hovered (default $text-color)
 *
 *  Note: To use this mixin, the target element should have a data-text attribute with the same text content.
 *  Example: <span class="gradient-animated" data-text="Hello">Hello</span>
 */
@mixin gradient-animated-text(
    $gradient-start: $malinowy,
    $gradient-end: $malinowy-dark,
    $duration: 0.3s,
    $translateY: 4px,
    $exclude-class: active-pill,
    $text-color: $text-color
) {
    // basic behavior of the element (context for ::after)
    position: relative;
    display: inline-block;
    z-index: 1;
    color: $text-color;
    -webkit-font-smoothing: antialiased;
    transition: color $duration ease-in-out; // synchronization

    // gradient overlay
    &:not(.#{$exclude-class})::after {
        content: attr(data-text);
        position: absolute;
        inset: 0; // top/right/bottom/left: 0
        left: 0;
        top: 0;
        white-space: nowrap;
        pointer-events: none;
        z-index: 2;
        opacity: 0;
        transform: translateY($translateY);
        transition: opacity $duration ease-in-out,
            transform $duration ease-in-out;
        background: linear-gradient(135deg, $gradient-start, $gradient-end);
        -webkit-background-clip: text;
        background-clip: text;
        -webkit-text-fill-color: transparent;
        text-fill-color: transparent;
        font: inherit; // important — same size/weight
        line-height: inherit;
        -webkit-font-smoothing: antialiased;
    }

    // hover/focus — show overlay. we don't change the base color here (you can add color: transparent if you want)
    &:not(.#{$exclude-class}) {
        &:hover,
        &:focus {
            // optionally: color: transparent; // only if you want the base to disappear
            color: transparent; // reveal pseudo-element
            &::after {
                opacity: 1;
                transform: translateY($translateY);
            }
        }

        &:active {
            color: $gradient-end;
            text-shadow: 0 0 3px rgba($gradient-end, 0.3);
        }
    }

    // if the element has an exclude class, you may want the gradient to be always visible:
    &.#{$exclude-class} {
        &::after {
            opacity: 1;
            transform: translateY(0);
        }
    }
}

/**
 *  gradient-button
 *
 *  Creates a button with a gradient border effect using ::before and a mask using ::after.
 *  Parameterizable mixin for the effect: gradient “border” (pseudo ::before) + mask (::after)
 *  Params:
 *   - $gradient-start, $gradient-end (color): gradient colors
 *   - $mask-bg (color): interior color (e.g., $bg-pale)
 *   - $border-size (length): border thickness
 *   - $radius (length): border-radius
 *   - $padding (length): internal padding
 *   - $inset (length): inset
 *   - $text-color (color): text color at rest
 *   - $text-color-on (color): text color on hover (when the background becomes gradient)
 *   - $box-shadow-on (box-shadow): box-shadow on active
 *   - $text-shadow-on (text-shadow): text-shadow on active
 *   - $transition-speed (duration): animation duration
 *   - $transparent-center (boolean): modified mixin with transparent center option
 */
@mixin gradient-button(
    $gradient-start: $primary,
    $gradient-end: $malinowy-dark,
    $mask-bg: $bg-pale,
    $border-size: 2px,
    $radius: 50rem,
    $padding: inherit,
    $inset: 0px,
    $text-color: inherit,
    $text-color-on: $bg-pale,
    $box-shadow-on: 0 8px 20px rgba($malinowy-dark, 0.6),
    $text-shadow-on: 0 0 3px rgba(255, 255, 255, 0.7),
    $transition-speed: 0.3s,
    $transparent-center: false
) {
    position: relative;
    display: inline-block;
    padding: $padding;
    border-radius: $radius;
    color: $text-color;
    cursor: pointer;
    text-decoration: none;
    z-index: 2;
    transition: color $transition-speed ease-in-out,
        box-shadow $transition-speed ease-in-out,
        text-shadow $transition-speed ease-in-out,
        background $transition-speed ease-in-out,
        border-color $transition-speed ease-in-out;

    @if $transparent-center == true {
        // transparent center mode — border as a “frame”
        &::before {
            content: "";
            position: absolute;
            inset: $inset;
            border-radius: inherit;
            background: transparent;
            z-index: 3; // above element content and image
            pointer-events: none;
            transition: opacity $transition-speed ease-in-out,
                border $transition-speed ease-in-out;
            opacity: 1;

            @if $border-size > 0 {
                border: $border-size solid $gradient-start;
            } @else {
                border: none;
            }
        }

        // internal panel (displayed as gradient on hover)
        &::after {
            content: "";
            position: absolute;
            inset: $inset;
            border-radius: inherit;
            background: transparent; // invisible in normal state
            z-index: -1; // above element content and image
            pointer-events: none;
            border: none;
            background: linear-gradient(135deg, $gradient-start, $gradient-end);
            transition: opacity $transition-speed ease-in-out;
            opacity: 0;
        }

        &:hover,
        &:focus,
        &:active,
        &.active {
            color: $text-color-on !important;
            &::before {
                @if $border-size > 0 {
                    border: none;
                }
                opacity: 0;
            }

            &::after {
                opacity: 1;
            }
        }

        &:focus,
        &:active,
        &.active {
            &::after {
                border: #{$border-size - 1} solid $text-color-on;
            }
        }
    } @else {
        // classic mode — gradient in ::before + mask in ::after
        &::before {
            content: "";
            position: absolute;
            inset: -$border-size;
            border-radius: inherit;
            background: linear-gradient(135deg, $gradient-start, $gradient-end);
            z-index: -2;
            pointer-events: none;
        }
        &::after {
            content: "";
            position: absolute;
            inset: 0;
            border-radius: inherit;
            background: $mask-bg;
            z-index: -1;
            pointer-events: none;
            transition: opacity $transition-speed ease-in-out;
        }
        &:hover,
        &:focus,
        &:active,
        &.active {
            color: $text-color-on;
            &::after {
                opacity: 0;
            }
        }
    }

    // shadow of click
    &:active,
    &.active {
        box-shadow: $box-shadow-on;
        text-shadow: $text-shadow-on;
    }
}

/**
 * gradient-panel
 *
 * Creates a gradient panel effect with a border that transitions to a gradient background on hover.
 * Params:
 *  - $inset (length): internal distance of the panel from the edge (e.g., 8px)
 *  - $border-size (length): thickness of the normal border (0 = no border)
 *  - $border-color (color): border color in normal state
 *  - $gradient-start (color), $gradient-end (color): gradient colors for hover
 *  - $mask-bg (color): mask background (internal) in normal state (e.g. $bg-pale)
 *  - $text-on-gradient (color): text color when the panel is gradient (e.g. $bg-pale)
 *  - $transition-speed (duration): animation time
 */
@mixin gradient-panel(
    $inset: 8px,
    $border-size: 3px,
    $border-color: $primary,
    $gradient-start: $malinowy,
    $gradient-end: $malinowy-dark,
    $mask-bg: $bg-pale,
    $text-on-gradient: $bg-pale,
    $transition-speed: 0.3s
) {
    position: relative;
    overflow: hidden;
    z-index: 2;

    // picture frame
    &::before {
        content: "";
        position: absolute;
        inset: $inset;
        border-radius: inherit;
        background: transparent;
        z-index: 3; // above element content and image
        pointer-events: none;
        transition: opacity $transition-speed ease-in-out,
            border $transition-speed ease-in-out;
        opacity: 1;

        @if $border-size > 0 {
            border: $border-size solid $border-color;
        } @else {
            border: none;
        }
    }

    // internal panel (displayed as gradient on hover)
    &::after {
        content: "";
        position: absolute;
        inset: $inset;
        border-radius: inherit;
        background: transparent; // invisible in normal state
        z-index: 3; // above element content and image
        pointer-events: none;
        background: linear-gradient(135deg, $gradient-start, $gradient-end);
        transition: opacity $transition-speed ease-in-out;
        opacity: 0;
    }

    &:hover,
    &:focus,
    &:active,
    &.active {
        &::before {
            @if $border-size > 0 {
                border: none;
            }
            opacity: 0;
        }

        &::after {
            opacity: 0.7;
        }
    }

    &:focus,
    &:active,
    &.active {
        &::after {
            opacity: 1;
        }
    }
}

/**
 * gradient-frame
 *
 * Creates a gradient frame effect around an element.
 * Params:
 *  - $inset (length) : internal distance of the frame from the edge (default: 8px)
 *  - $border-size (length) : thickness of the normal border (<=0 = border 2px solid)
 *  - $border-color (color) : border color in normal state (default: $primary)
 *  - $z-index (number) : z-index of the frame (default: 2)
 */
@mixin gradient-frame(
    $inset: 8px,
    $border-size: 2px,
    $border-color: $primary,
    $z-index: 2
) {
    position: relative;
    overflow: hidden;
    z-index: $z-index;

    // picture frame
    &::before {
        content: "";
        position: absolute;
        inset: $inset;
        border-radius: inherit;
        background: transparent;
        z-index: 3; // above element content and image
        pointer-events: none;
        opacity: 1;

        @if $border-size > 0 {
            border: $border-size solid $border-color;
        } @else {
            border: 2px solid $border-color;
        }
    }
}
